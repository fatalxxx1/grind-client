repeat
    task.wait()
until game:IsLoaded()
-- ===SERVICES====
local player = game.Players.LocalPlayer
local TweenSer = game:GetService('TweenService')

local function GetCharacter()
    return player.Character or player.CharacterAdded:Wait()
end

local function GetRoot()
    local char = GetCharacter()
    return char:WaitForChild("HumanoidRootPart")
end

-- // Vars
local Var = {
    Char = GetCharacter(),
    Root = GetRoot(),
    FoodNode = workspace:WaitForChild("Interactions"):WaitForChild("FoodNodes"),
    Lake = workspace:WaitForChild("Interactions"):WaitForChild("Lakes")
}

player.CharacterAdded:Connect(function()
    Var.Char = GetCharacter()
    Var.Root = GetRoot()
end)

local Re = {
    Food = game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Food"),
    Drink = game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("DrinkRemote"),
    Shelter = game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Sheltered")
}

local function Dist(a, b)
    return (a - b).Magnitude
end

do
    local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

    local Window = WindUI:CreateWindow({
        Title = "Grind Client (Glazed)",
        Icon = "rbxassetid://9009086352",
        Author = "C O S",
        Size = UDim2.fromOffset(1200, 1200),
        Resizable = false
    })
    Window:Tag({
        Title = "Beta",
        Icon = "github",
        Color = Color3.fromHex("#30ff6a"),
        Radius = 0, -- from 0 to 13
    })

    Window:Divider()
    Window:DisableTopbarButtons({"Fullscreen"})

    Window:EditOpenButton({
        CornerRadius = UDim.new(0, 16),
        StrokeThickness = 0,
        OnlyMobile = false,
        Enabled = true,
        Draggable = false
    })

    local Section = Window:Section({
        Title = "Main",
        Icon = "chart-bar",
        Opened = true
    })

    local info1 = Section:Tab({
        Title = "Info",
        Icon = "badge-info",
        Locked = false
    })
    info1:Select() -- Select Tab
    local Paragraph1 = info1:Paragraph({
        Title = "Warning",
        Desc = "all of farm functions is blatant. \nuse at your own RISK",
        Color = "Red",
        Image = "",
        ImageSize = 30,
        Thumbnail = "",
        ThumbnailSize = 80,
        Locked = false

    })

    local Paragraph2 = info1:Paragraph({
        Title = "Change Log",
        Desc = "Fix Tween",

        Image = "",
        ImageSize = 30,
        Thumbnail = "",
        ThumbnailSize = 80,
        Locked = false

    })

    info1:Divider()
    local Tab1 = Section:Tab({
        Title = "Farm",
        Icon = "hamburger",
        Locked = false
    })

    _G.TG = false
    _G.Food = nil
    _G.TWSPEED = 260
    _G.Delay = 1
    _G.HH = 100
    _G.TT = 100
    _G.ST = false

    local Diet = nil
    local Carcass, Berry, Water = false, false, false

    local PlayerGui = player:WaitForChild("PlayerGui")
    local CreatureGui = PlayerGui:WaitForChild("CreatureInfoGui")
    local mobileGUi = game:GetService("Players").LocalPlayer.PlayerGui.HUDGui.BottomFrame.Mobile
    local PcGui = game:GetService("Players").LocalPlayer.PlayerGui.HUDGui.BottomFrame.Other
    local weatherL = game:GetService("Players").LocalPlayer.PlayerGui.HUDGui.SideFrame.Mobile.MinimapFrame.Weather

    local thirstL = game:GetService("Players").LocalPlayer.PlayerGui.HUDGui.BottomFrame.Other.Thirst.HoverLabel
    local hungerL = game:GetService("Players").LocalPlayer.PlayerGui.HUDGui.BottomFrame.Other.Hunger.HoverLabel

    local activeTW

    local function TweenTo(CF)
        if not Var.Root or not _G.TG then
            return
        end
        if activeTW then
            activeTW:Cancel()
        end

        local Dist = (CF.Position - Var.Root.Position).Magnitude
        local time = math.clamp(Dist / _G.TWSPEED ,0.05,3)
        local tween = TweenSer:Create(Var.Root, TweenInfo.new(time, Enum.EasingStyle.Linear), {
            CFrame = CF
        })
        activeTW = tween
        tween:Play()

        local state = tween.Completed:wait()
        if state ~= Enum.PlaybackState.Completed then
            return false
        end
        return true
    end

    weatherL:GetPropertyChangedSignal("Text"):Connect(function()
        if _G.ST then
            if weatherL.Text == 'ACID RAIN' or weatherL.Text == 'SNOW' or weatherL.Text == 'BLIZZARD' then
                Re.Shelter:FireServer(true)
            else
                Re.Shelter:FireServer(false)
            end
        end
    end)

    Tab1:Section({
        Title = 'Settings',
        Box = true,
        TextTransparency = 0.05,
        TextXAlignment = "Center",
        TextSize = 17,
        Opened = true
    })

    Tab1:Divider()
    local MAXH = Tab1:Slider({
        Title = "HUNGER",
        Desc = "tp at %",
        Step = 10,
        Value = {
            Min = 20,
            Max = 100,
            Default = 100
        },
        Callback = function(value)
            _G.HH = value
        end
    })

    local MAXT = Tab1:Slider({
        Title = "THIRST",
        Desc = "tp at %",
        Step = 10,
        Value = {
            Min = 20,
            Max = 100,
            Default = 100
        },
        Callback = function(value)
            _G.TT = value
        end
    })

    Tab1:Divider()
    local FoodD = Tab1:Dropdown({
        Title = "Food",
        Desc = "Select Food",
        Values = {"Grass", "Carcass"},
        Value = "",
        Callback = function(option)
            _G.Food = option
            if _G.Food == nil then
                return
            end
            WindUI:Notify({
                Title = "Food",
                Content = 'You Selected ' .. _G.Food,
                Duration = 1,
                Icon = "hamburger"
            })
        end
    })

    local TS = Tab1:Slider({
        Title = "Tween Speed",
        Desc = "Lower = Slower",
        Step = 10,
        Value = {
            Min = 20,
            Max = 260,
            Default = 260
        },
        Callback = function(value)
            _G.TWSPEED = value
        end
    })

    Tab1:Toggle({
        Title = "Start AFK",
        Desc = "Start AFK",
        Icon = "",
        Type = "Checkbox",
        Value = false,

        Callback = function(Value)
            _G.TG = Value

            if not _G.TG then
                if workspace:FindFirstChild(".") then
                    workspace["."]:Destroy()
                end
                return
            end

            if workspace:FindFirstChild(".") then
                workspace["."]:Destroy()
            end

            local safePart = Instance.new("Part")
            safePart.Size = Vector3.new(200, 5, 200)
            safePart.Transparency = 0.5
            safePart.Anchored = true
            safePart.Name = "."
            safePart.CFrame = CFrame.new(0, 1500, 0)
            safePart.Parent = workspace
            safePart.Material = Enum.Material.Neon

            task.spawn(function()

                local Busy = false

                while _G.TG do
                    task.wait()

                    if not Var.Root or _G.Food == nil then
                        continue
                    end

                    local Hunger = tonumber(hungerL.Text:match("(%d+)%%")) or 100
                    local Thirst = tonumber(thirstL.Text:match("(%d+)%%")) or 100

                    if PcGui.Visible or mobileGUi.Visible then
                        -- ================= DRINK =================
                        if Thirst < _G.TT and not Busy then
                            Busy = true

                            local lake = Var.Lake:FindFirstChild("Lake")

                            if lake then
                               
                                if TweenTo(lake:GetPivot()) then
                                     wait(1)
                
                                        repeat
                                            Var.Root.CFrame = lake:GetPivot()
                                            Re.Drink:FireServer(lake)
                                             
                                            Thirst = tonumber(thirstL.Text:match("(%d+)%%")) or 100
                                            task.wait()

                                        until Thirst >= 100 or not _G.TG

                                end
                            end
                            Busy = false
                        end

                        -- ================= EAT =================
                        if Hunger < _G.HH and _G.Food and not Busy then
                            Busy = true

                            local node = Var.FoodNode:FindFirstChild(_G.Food)
                            local foodmodel = workspace.Interactions.Food:FindFirstChild(_G.Food)

                            if node and foodmodel then
                                if TweenTo(node:GetPivot()*CFrame.new(0,10,0)) then
                                    wait(1)
                                        repeat
                                            Var.Root.CFrame = node:GetPivot()*CFrame.new(0,10,0)
                                            Re.Food:FireServer(node)

                                            Hunger = tonumber(hungerL.Text:match("(%d+)%%")) or 100
                                            task.wait()

                                        until Hunger >= 100 or not _G.TG
                                end
                            end

                            Busy = false
                        end
                    end

                    -- SAFE TP
                    if not Busy and safePart then
                        TweenTo(safePart.CFrame * CFrame.new(0, 5, 0))
                    end
                end
            end)
        end
    })
    Tab1:Divider()

    local STTG = Tab1:Toggle({
        Title = "Auto Shelter",
        Desc = "Auto Shelter when dangerous weather",
        Icon = "",
        Type = "Checkbox",
        Value = false, -- default value
        Callback = function(Value)
            _G.ST = Value
        end
    })

end
