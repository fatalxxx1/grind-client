repeat
    task.wait()
until game:IsLoaded()

local player = game.Players.LocalPlayer

local function GetCharacter()
    return player.Character or player.CharacterAdded:Wait()
end

local function GetRoot()
    local char = GetCharacter()
    return char:WaitForChild("HumanoidRootPart")
end

-- // Vars
local Var = {
    Char = GetCharacter(),
    Root = GetRoot(),
    FoodNode = workspace:WaitForChild("Interactions"):WaitForChild("FoodNodes"),
    Lake = workspace:WaitForChild("Interactions"):WaitForChild("Lakes")
}

player.CharacterAdded:Connect(function()
    Var.Char = GetCharacter()
    Var.Root = GetRoot()
end)


local Re = {
    Food = game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Food"),
    Drink = game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("DrinkRemote"),
    Shelter = game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Sheltered")
}

local function Dist(a, b)
    return (a - b).Magnitude
end

do
    local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

    local Window = WindUI:CreateWindow({
        Title = "Grind Client v0.4.9",
        Icon = "rbxassetid://9009086352",
        Author = "C O S",
        Size = UDim2.fromOffset(1200, 1200),
        Resizable = false,
    })
    Window:Divider()
    Window:DisableTopbarButtons({
        "Fullscreen",
    })

    Window:EditOpenButton({
    CornerRadius = UDim.new(0,16),
    StrokeThickness = 0,
    OnlyMobile = false,
    Enabled = true,
    Draggable = false,
    })

    local Section = Window:Section({
        Title = "Main",
        Icon = "chart-bar",
        Opened = true
    })

    local info1 = Section:Tab({
        Title = "Info",
        Icon = "badge-info",
        Locked = false
    })
    info1:Select() -- Select Tab
    local Paragraph1 = info1:Paragraph({
        Title = "Warning",
        Desc = "all of farm functions is blatant. \nuse at your own RISK",
        Color = "Red",
        Image = "",
        ImageSize = 30,
        Thumbnail = "",
        ThumbnailSize = 80,
        Locked = false

    })


    info1:Divider()
    local Tab1 = Section:Tab({
        Title = "Farm",
        Icon = "hamburger",
        Locked = false
    })

    _G.TG = false
    _G.Food = nil
    _G.Delay = 1
    _G.HH = 100
    _G.TT = 100
    local Diet = nil
    local Carcass, Berry, Water = false, false, false

    local PlayerGui = player:WaitForChild("PlayerGui")
    local CreatureGui = PlayerGui:WaitForChild("CreatureInfoGui")
    local mobileGUi = game:GetService("Players").LocalPlayer.PlayerGui.HUDGui.BottomFrame.Mobile
    local PcGui = game:GetService("Players").LocalPlayer.PlayerGui.HUDGui.BottomFrame.Other
    local weatherL = game:GetService("Players").LocalPlayer.PlayerGui.HUDGui.SideFrame.Mobile.MinimapFrame.Weather

    local thirstL = game:GetService("Players").LocalPlayer.PlayerGui.HUDGui.BottomFrame.Other.Thirst.HoverLabel
    local hungerL = game:GetService("Players").LocalPlayer.PlayerGui.HUDGui.BottomFrame.Other.Hunger.HoverLabel
    

    weatherL:GetPropertyChangedSignal("Text"):Connect(function()
	    if weatherL.Text == 'ACID RAIN' then
            Re.Shelter:FireServer(true)
        else
            Re.Shelter:FireServer(false)
        end
    end)

    Tab1:Section({
        Title = 'Settings',
        Box = true,
        TextTransparency = 0.05,
        TextXAlignment = "Center",
        TextSize = 17,
        Opened = true
    })

    local DelayD = Tab1:Dropdown({
        Title = "Tp Delay",
        Desc = "Respond delay",
        Values = {"1", "1.5", "2","2.5",},
        Value = "1",
        Callback = function(option)
            _G.Delay = tonumber(option)
        end
    })
    Tab1:Divider()
    local MAXH = Tab1:Slider({
        Title = "HUNGER",
        Desc = "tp at %",
        Step = 10,
        Value = {
            Min = 20,
            Max = 100,
            Default = 100
        },
        Callback = function(value)
            _G.HH = value
        end
    })


    local MAXT = Tab1:Slider({
        Title = "THIRST",
        Desc = "tp at %",
        Step = 10,
        Value = {
            Min = 20,
            Max = 100,
            Default = 100
        },
        Callback = function(value)
            _G.TT = value
        end
    })

    Tab1:Divider()
    local FoodD = Tab1:Dropdown({
        Title = "Food",
        Desc = "Select Food",
        Values = {"Grass", "Carcass"},
        Value = "",
        Callback = function(option)
            _G.Food = option
            WindUI:Notify({
                Title = "Food",
                Content = 'You Selected ' .. _G.Food,
                Duration = 1,
                Icon = "hamburger"
            })
        end
    })

    Tab1:Divider()
    Tab1:Toggle({
        Title = "Start",
        Desc = "Start AFK",
        Icon = "",
        Type = "Checkbox",
        Value = false,

        Callback = function(Value)
            _G.TG = Value

           
            if not _G.TG then
                 Var.Root.Anchored = false
                if workspace:FindFirstChild(".") then
                    workspace["."]:Destroy()
                end
                return
            end

            if workspace:FindFirstChild(".") then
                workspace["."]:Destroy()
            end

            local safePart = Instance.new("Part")
            safePart.Size = Vector3.new(200, 5, 200)
            safePart.Transparency = 0.5
            safePart.Anchored = true
            safePart.Name = "."
            safePart.CFrame = CFrame.new(0, 1500, 0)
            safePart.Parent = workspace
            safePart.Material = Enum.Material.Neon

            task.spawn(function()

                local Busy = false

                while _G.TG do
                    task.wait()

                    if not Var.Root or _G.Food == nil then
                       
                        continue
                    end

                    local Hunger = tonumber(hungerL.Text:match("(%d+)%%")) or 100
                    local Thirst = tonumber(thirstL.Text:match("(%d+)%%")) or 100

                    if PcGui.Visible or mobileGUi.Visible then
                        Var.Root.Anchored = true
                        -- ================= DRINK =================
                        if Thirst < _G.TT and not Busy then
                            Busy = true
                            task.wait(_G.Delay)

                            local lake = Var.Lake:FindFirstChild("Lake")

                            if lake then
                                Var.Root.CFrame = lake:GetPivot() * CFrame.new(0, 1500, 0)
                                task.wait(_G.Delay)
                                repeat
                                    Var.Root.CFrame = lake:GetPivot()
                                    task.wait(0.25)

                                    Re.Drink:FireServer(lake)
                                    Thirst = tonumber(thirstL.Text:match("(%d+)%%")) or 100

                                until Thirst >= 100 or not _G.TG
                                task.wait(_G.Delay)
                                Var.Root.CFrame = lake:GetPivot() * CFrame.new(0, 1500, 0)
                            end

                            Busy = false
                        end

                        -- ================= EAT =================
                        if Hunger < _G.HH and _G.Food and not Busy then
                            Busy = true

                            local node = Var.FoodNode:FindFirstChild(_G.Food)
                            local foodmodel = workspace.Interactions.Food:FindFirstChild(_G.Food)

                            if node and foodmodel then
                                Var.Root.CFrame = node:GetPivot() * CFrame.new(0, 1500, 0)
                               task.wait(_G.Delay)
                                repeat
                                    Var.Root.CFrame = node:GetPivot() * CFrame.new(0, 10, 0)
                                    task.wait(0.25)

                                    Re.Food:FireServer(foodmodel)
                                    Hunger = tonumber(hungerL.Text:match("(%d+)%%")) or 100

                                until Hunger >= 100 or not _G.TG
                                task.wait(_G.Delay)
                                Var.Root.CFrame = node:GetPivot() * CFrame.new(0, 1500, 0)
                            end

                            Busy = false
                        end
                    end

                    -- SAFE TP
                    if not Busy and safePart then
                        task.wait(_G.Delay)
                        Var.Root.CFrame = safePart.CFrame * CFrame.new(0, 5, 0)
                    end
                end
            end)
        end
    })
end
